{"ast":null,"code":"import { JsonEditorComponent, JsonEditorOptions } from '../../../ang-jsoneditor/src/public_api';\nimport { FormBuilder } from '@angular/forms';\nimport { schema } from './schema.value';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../ang-jsoneditor/src/jsoneditor/jsoneditor.component\";\nimport * as i4 from \"./show.component\";\nconst _c0 = [\"editor\"];\nconst _c1 = [\"editorTwo\"];\n\nfunction DemoComponent_h3_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Force Language to \", ctx_r0.editorOptions.language, \"\");\n  }\n}\n\nfunction DemoComponent_div_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\");\n    i0.ɵɵtext(2, \"Form submitted\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.formData, \" \");\n  }\n}\n\nfunction DemoComponent_div_45_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"json-editor\", 12);\n    i0.ɵɵlistener(\"change\", function DemoComponent_div_45_div_1_Template_json_editor_change_1_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return ctx_r7.showJson($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const prd_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"options\", ctx_r5.makeOptions())(\"data\", prd_r6);\n  }\n}\n\nfunction DemoComponent_div_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DemoComponent_div_45_div_1_Template, 2, 2, \"div\", 10);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.dataMulti.products);\n  }\n}\n\nexport let DemoComponent = /*#__PURE__*/(() => {\n  class DemoComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.show = false;\n      this.dataMulti = {\n        products: [{\n          name: 'car',\n          product: [{\n            name: 'honda',\n            model: [{\n              id: 'civic',\n              name: 'civic'\n            }, {\n              id: 'accord',\n              name: 'accord'\n            }, {\n              id: 'crv',\n              name: 'crv'\n            }, {\n              id: 'pilot',\n              name: 'pilot'\n            }, {\n              id: 'odyssey',\n              name: 'odyssey'\n            }]\n          }]\n        }, {\n          name: 'book',\n          product: [{\n            name: 'dostoyevski',\n            model: [{\n              id: 'Axe',\n              name: 'Axe'\n            }, {\n              id: 'accord',\n              name: 'accord'\n            }, {\n              id: 'crv',\n              name: 'crv'\n            }, {\n              id: 'pilot',\n              name: 'pilot'\n            }, {\n              id: 'odyssey',\n              name: 'odyssey'\n            }]\n          }]\n        }]\n      };\n\n      this.makeOptions = () => {\n        return new JsonEditorOptions();\n      };\n\n      this.editorOptions = new JsonEditorOptions();\n      this.editorOptions.schema = schema;\n      this.initEditorOptions(this.editorOptions);\n      this.editorOptions2 = new JsonEditorOptions();\n      this.initEditorOptions(this.editorOptions2);\n    }\n\n    ngOnInit() {\n      this.showData = this.data = {\n        'randomNumber': 2,\n        'products': [{\n          'name': 'car',\n          'product': [{\n            'name': 'honda',\n            'model': [{\n              'id': 'civic',\n              'name': 'civic'\n            }, {\n              'id': 'accord',\n              'name': 'accord'\n            }, {\n              'id': 'crv',\n              'name': 'crv'\n            }, {\n              'id': 'pilot',\n              'name': 'pilot'\n            }, {\n              'id': 'odyssey',\n              'name': 'odyssey'\n            }]\n          }]\n        }]\n      };\n      this.data2 = {\n        'nedata': 'test'\n      };\n      this.form = this.fb.group({\n        myinput: [this.data2]\n      }); // this.editorOptions.onChange = this.changeLog.bind(this);\n    }\n\n    changeLog(event = null) {\n      console.log(event);\n      console.log('change:', this.editor);\n      console.log('change2:', this.editorTwo);\n      /**\n       * Manual validation based on the schema\n       * if the change does not meet the JSON Schema, it will use the last data\n       * and will revert the user change.\n       */\n\n      const editorJson = this.editor.getEditor();\n      editorJson.validate();\n      const errors = editorJson.validateSchema.errors;\n\n      if (errors && errors.length > 0) {\n        console.log('Errors found', errors);\n        editorJson.set(this.showData);\n      } else {\n        this.showData = this.editor.get();\n      }\n    }\n\n    changeEvent(event) {\n      console.log(event);\n    }\n\n    initEditorOptions(editorOptions) {\n      // this.editorOptions.mode = 'code'; // set only one mode\n      editorOptions.modes = ['code', 'text', 'tree', 'view']; // set all allowed modes\n      // this.editorOptions.ace = (<any>window).ace.edit('editor');\n    }\n\n    setLanguage(lang) {\n      this.editorOptions.language = lang; // force a specific language, ie. pt-BR\n\n      this.editor.setOptions(this.editorOptions);\n    }\n\n    setAce() {\n      const aceEditor = window.ace.edit(document.querySelector('#a' + this.editor.id + '>div')); // custom your ace here\n\n      aceEditor.setReadOnly(true);\n      aceEditor.setFontSize('110pt');\n      this.editorOptions.ace = aceEditor;\n      this.editor.setOptions(this.editorOptions);\n    }\n\n    toggleNav() {\n      this.editorOptions.navigationBar = !this.editorOptions.navigationBar;\n      this.editor.setOptions(this.editorOptions);\n    }\n\n    toggleStatus() {\n      this.editorOptions.statusBar = !this.editorOptions.statusBar;\n      this.editor.setOptions(this.editorOptions);\n    }\n\n    customLanguage() {\n      this.editorOptions.languages = {\n        'pt-BR': {\n          'auto': 'Automático testing'\n        },\n        'en': {\n          'auto': 'Auto testing'\n        }\n      };\n      this.editor.setOptions(this.editorOptions);\n    }\n\n    changeObject() {\n      this.data.randomNumber = Math.floor(Math.random() * 8);\n    }\n\n    changeData() {\n      this.data = Object.assign({}, this.data, {\n        randomNumber: Math.floor(Math.random() * 8)\n      });\n    }\n    /**\n     * Example on how get the json changed from the jsoneditor\n     */\n\n\n    getData() {\n      const changedJson = this.editor.get();\n      console.log(changedJson);\n    }\n\n    print(v) {\n      return JSON.stringify(v, null, 2);\n    }\n\n    submit() {\n      this.formData = JSON.stringify(this.form.value, null, 2);\n      console.log(this.form.value);\n    }\n\n    showJson(d) {\n      console.log(d);\n      this.EditedData = JSON.stringify(d, null, 2);\n    }\n\n  }\n\n  DemoComponent.ɵfac = function DemoComponent_Factory(t) {\n    return new (t || DemoComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n  };\n\n  DemoComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DemoComponent,\n    selectors: [[\"app-demo\"]],\n    viewQuery: function DemoComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editor = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editorTwo = _t.first);\n      }\n    },\n    decls: 54,\n    vars: 10,\n    consts: [[3, \"click\"], [4, \"ngIf\"], [2, \"height\", \"600px\"], [3, \"options\", \"data\", \"jsonChange\"], [\"editor\", \"\"], [3, \"data\"], [2, \"height\", \"300px\"], [3, \"formGroup\", \"submit\"], [\"formControlName\", \"myinput\", 3, \"options\"], [\"editorTwo\", \"\"], [\"class\", \"w-100-p p-24\", 4, \"ngFor\", \"ngForOf\"], [1, \"w-100-p\", \"p-24\"], [3, \"options\", \"data\", \"change\"]],\n    template: function DemoComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h2\");\n        i0.ɵɵtext(1, \"Options\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"h3\");\n        i0.ɵɵtext(3, \"Language\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_4_listener() {\n          return ctx.setLanguage(\"en\");\n        });\n        i0.ɵɵtext(5, \"Language EN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_6_listener() {\n          return ctx.setLanguage(\"pt-BR\");\n        });\n        i0.ɵɵtext(7, \"Language PT\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_8_listener() {\n          return ctx.customLanguage();\n        });\n        i0.ɵɵtext(9, \"Language Custom\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"hr\");\n        i0.ɵɵelementStart(11, \"h3\");\n        i0.ɵɵtext(12, \"Live Reload\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_13_listener() {\n          return ctx.changeData();\n        });\n        i0.ɵɵtext(14, \"New Data\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(15);\n        i0.ɵɵelementStart(16, \"h3\");\n        i0.ɵɵtext(17, \"Custom Options\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_18_listener() {\n          return ctx.setAce();\n        });\n        i0.ɵɵtext(19, \"Customize Ace\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(20, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_20_listener() {\n          return ctx.toggleNav();\n        });\n        i0.ɵɵtext(21, \"Navigation Bar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_22_listener() {\n          return ctx.toggleStatus();\n        });\n        i0.ɵɵtext(23, \"Status Bar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(24, \"hr\");\n        i0.ɵɵtemplate(25, DemoComponent_h3_25_Template, 2, 1, \"h3\", 1);\n        i0.ɵɵelementStart(26, \"h3\");\n        i0.ɵɵtext(27, \"Example with (change)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 2)(29, \"json-editor\", 3, 4);\n        i0.ɵɵlistener(\"jsonChange\", function DemoComponent_Template_json_editor_jsonChange_29_listener($event) {\n          return ctx.changeLog($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"app-show\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"h3\");\n        i0.ɵɵtext(33, \"Using options and data variable \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 6)(35, \"form\", 7);\n        i0.ɵɵlistener(\"submit\", function DemoComponent_Template_form_submit_35_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelement(36, \"json-editor\", 8, 9);\n        i0.ɵɵtemplate(38, DemoComponent_div_38_Template, 4, 1, \"div\", 1);\n        i0.ɵɵelementStart(39, \"button\");\n        i0.ɵɵtext(40, \"Submit\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(41, \"h2\");\n        i0.ɵɵtext(42, \"Multi json in a loop\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"button\", 0);\n        i0.ɵɵlistener(\"click\", function DemoComponent_Template_button_click_43_listener() {\n          return ctx.show = !ctx.show;\n        });\n        i0.ɵɵtext(44, \"Show/Hide Json Editors\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(45, DemoComponent_div_45_Template, 2, 1, \"div\", 1);\n        i0.ɵɵelementStart(46, \"table\")(47, \"tr\")(48, \"td\");\n        i0.ɵɵtext(49, \"Last edit data\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(50, \"tr\")(51, \"td\");\n        i0.ɵɵtext(52);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(53, \"hr\");\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵtextInterpolate1(\"\\nRandom Number: \", ctx.data.randomNumber, \" \");\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngIf\", ctx.editorOptions.language);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"options\", ctx.editorOptions)(\"data\", ctx.data);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"data\", ctx.showData);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.form);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"options\", ctx.editorOptions2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.formData);\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngIf\", ctx.show === true);\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.EditedData);\n      }\n    },\n    directives: [i2.NgIf, i3.JsonEditorComponent, i4.ShowComponent, i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.NgControlStatus, i1.FormControlName, i2.NgForOf],\n    styles: [\"json-editor[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:100%}\"]\n  });\n  return DemoComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}